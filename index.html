<!DOCTYPE html>
<head>
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map_canvas { height: 100% }
  </style>

  <link rel="stylesheet" type="text/css" href="cartodb.css"/>
  <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript" src="https://raw.github.com/Vizzuality/cartodb-gmapsv3/gh-pages/cartodb-gmapsv3.js"></script>
  <script type="text/javascript" src="https://raw.github.com/Vizzuality/cartodb-gmapsv3/gh-pages/wax.g.js"></script>

  <script type="text/javascript">
    function initialize() {
      var center = new google.maps.LatLng(21.321467,-157.723083);
      var myOptions = {
      zoom: 12,
      center: center,
      mapTypeId: google.maps.MapTypeId.SATELLITE
    };
      var map = new google.maps.Map(document.getElementById("map_canvas"),
                                  myOptions);
    var cartodb_gmapsv3 = new google.maps.CartoDBLayer({
      map_canvas: 'map_canvas',
      map: map,
      user_name:"outdoorshawaii",
      table_name: 'trails',
      query: "SELECT * FROM trails",
      map_style: true,
      infowindow: true,
      auto_bound: true
     });

    $('form').submit(function(ev){
      ev.stopPropagation(); ev.preventDefault();
      var value = $(this).find('input').val();
      cartodb1_gmapsv3.update(value);
    });

    }
  </script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width=100%; height=100%"></div>
</body>
